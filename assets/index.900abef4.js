var W=Object.defineProperty,Z=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var w=(t,e,s)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,f=(t,e)=>{for(var s in e||(e={}))O.call(e,s)&&w(t,s,e[s]);if(y)for(var s of y(e))N.call(e,s)&&w(t,s,e[s]);return t},m=(t,e)=>Z(t,tt(e));var E=(t,e)=>{var s={};for(var o in t)O.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(t!=null&&y)for(var o of y(t))e.indexOf(o)<0&&N.call(t,o)&&(s[o]=t[o]);return s};import{R as a,j as b,n as et,I as nt,a as st,L as v,u as ot,B as R,b as at,c as rt,d as C,e as ct}from"./vendor.2a8141b8.js";const it=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}};it();function D(...t){return t.filter(e=>e&&e!==!0).join(" ")}const lt=t=>new Date().getTime()-t;function B(t,e,s=!1){const o=a.useRef(-1),r=a.useRef(new Date().getTime()),c=a.useRef(e),[l,u]=a.useState("stopped"),_=a.useCallback((p=e)=>{clearTimeout(o.current),o.current=setTimeout(()=>{h(),t()},p),r.current=new Date().getTime(),c.current=p},[t,e]),S=a.useCallback(()=>{if(c.current<=0){h();return}clearTimeout(o.current),_(c.current),u("running")},[]),P=a.useCallback(()=>{if(c.current-=lt(r.current),c.current<=0){h();return}clearTimeout(o.current),u("paused")},[]),h=a.useCallback(()=>{clearTimeout(o.current),u("stopped")},[]),d=a.useCallback(()=>{_(),u("running")},[_]);return a.useEffect(()=>{if(!!s)return d(),h},[s,d,h]),{start:d,pause:P,resume:S,cancel:h,state:l}}const ut="_toast_1x937_1";var x={toast:ut,"toast--enter":"_toast--enter_1x937_16","toast-scale-in":"_toast-scale-in_1x937_1","toast-slide-in":"_toast-slide-in_1x937_1","toast--exit":"_toast--exit_1x937_19","toast-scale-out":"_toast-scale-out_1x937_1","toast-slide-out":"_toast-slide-out_1x937_1"};const n=b.exports.jsx,i=b.exports.jsxs,A=b.exports.Fragment;function dt({id:t,title:e,body:s,duration:o}){const r=a.useRef(null),[c,l]=a.useState(!0),{deleteToast:u}=F(),_=c?"toast--enter":"toast--exit",S=D(x.toast,x[_]),P=a.useCallback(p=>{p.animationName===x["toast-scale-out"]&&u(t)},[t]),h=a.useCallback(()=>{l(!1)},[]),d=o?B(h,o,!0):null;return a.useEffect(()=>{const p=r.current,Q=p.scrollHeight;p.setAttribute("style",`--height: ${Q}px`)},[]),i("div",{ref:r,className:S,onAnimationEnd:P,onMouseEnter:()=>d==null?void 0:d.pause(),onMouseLeave:()=>d==null?void 0:d.resume(),onClick:h,children:[n("h4",{children:e}),n("p",{children:s})]})}var ht={"toast-list":"_toast-list_1j3av_1"};function ft(){const t=mt();return n("aside",{className:ht["toast-list"],children:t.map(e=>n(dt,f({},e),e.id))})}const $=a.createContext([]),M=a.createContext({emitToast:()=>0,deleteToast:()=>0});function pt({children:t}){const[e,s]=a.useState([]),o=a.useCallback(c=>{s(l=>[m(f({},c),{id:et()}),...l])},[]),r=a.useCallback(c=>{s(l=>l.filter(u=>u.id!==c))},[]);return i(M.Provider,{value:{emitToast:o,deleteToast:r},children:[t,n($.Provider,{value:e,children:!!e.length&&n(ft,{})})]})}function mt(){return a.useContext($)}function F(){return a.useContext(M)}function j(t){return t.toJSON().split("T")[0]}function U(){return j(new Date)}function H(){let t=new Date;return t=new Date(t.getFullYear(),t.getMonth(),1),j(t)}function K(t){return new Promise(e=>setTimeout(e,t))}const J="https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&thumbs=true";async function I(t=H()){const s=await(await fetch(`${J}&start_date=${t}`)).json();return await K(2e3),s.reverse()}async function _t(t=U()){const s=await(await fetch(`${J}&date=${t}`)).json();return await K(2500),s}function gt(){return JSON.parse(localStorage.getItem("spacestagram_likes")||"{}")}function yt(t){localStorage.setItem("spacestagram_likes",JSON.stringify(t))}function Y(){const[t,e]=a.useState(!1),s=a.useCallback(async o=>(e(!0),o.finally(()=>{e(!1)})),[]);return[t,s]}const kt={posts:[],likes:{}};function St(t,e){switch(e.type){case"LOAD_POSTS":{const s=gt();return{posts:e.payload,likes:s}}case"LOAD_CUSTOM_POSTS":{if(typeof e.payload=="string")break;return m(f({},t),{posts:e.payload})}case"LIKE_POST":{const s=e.payload,o=m(f({},t.likes),{[s]:!t.likes[s]});return yt(o),m(f({},t),{likes:o})}}return t}function Pt(){const[t,e]=a.useReducer(St,kt),[s,o]=Y(),r=a.useCallback(async(c,l)=>{let u={type:c,payload:l};switch(u.type){case"LOAD_POSTS":u.payload=await o(I());break;case"LOAD_CUSTOM_POSTS":if(typeof u.payload!="string")break;u.payload=await o(I(u.payload));break}e(u)},[]);return[m(f({},t),{loading:s}),r]}const q=a.createContext(null),z=a.createContext(null);function Ct({children:t}){const[e,s]=Pt();return n(q.Provider,{value:s,children:n(z.Provider,{value:e,children:t})})}function V(){return a.useContext(z)}function L(){return a.useContext(q)}const xt="https://michiecodes.github.io/spacestagram-challenge";function Tt(){return/\w+$/.exec(xt)[0]}function g(o){var r=o,{children:t,className:e}=r,s=E(r,["children","className"]);return n("button",m(f({className:D("button",e)},s),{children:t}))}var bt={"date-picker":"_date-picker_ya9b3_1"};const vt="2015-01-01",Dt=U(),At=H();function Lt(){const t=L(),[e,s]=a.useState(At),o=a.useCallback(()=>{t("LOAD_CUSTOM_POSTS",e)},[e,t]);return i("div",{className:bt["date-picker"],children:[n("label",{htmlFor:"start-date",children:"Start Date: "}),n("input",{type:"date",id:"start-date",className:"input",min:vt,max:Dt,value:e,onChange:r=>s(r.target.value)}),n(g,{onClick:o,children:"Browse"})]})}function wt(t,e){const s=a.useRef(),[o,r]=a.useState(0);return a.useEffect(()=>(s.current=setInterval(()=>{r(c=>(c+1)%4)},e),()=>clearInterval(s.current)),[t,e]),t+".".repeat(o)}var Ot={"rocket-loader":"_rocket-loader_l7gac_1","rocket-launch--x":"_rocket-launch--x_l7gac_1","rocket-launch--y":"_rocket-launch--y_l7gac_1"};function k({text:t}){return n("div",{className:Ot["rocket-loader"],children:i("div",{children:[n("span",{children:n(nt,{})}),n("p",{children:t})]})})}function X(){const t=wt("Loading",250);return n(k,{text:t})}function Nt(t){return t.media_type==="image"?t.url:t.thumbnail_url}var T={"heart-icon":"_heart-icon_1unyc_1","heart-icon--show":"_heart-icon--show_1unyc_13","show-heart":"_show-heart_1unyc_1","heart-icon--hide":"_heart-icon--hide_1unyc_21","hide-heart":"_hide-heart_1unyc_1","button--liked":"_button--liked_1unyc_29"};function Et({postID:t}){const{likes:e}=V(),s=L(),o=a.useMemo(()=>e[t],[e,t]),r=o?"heart-icon--show":"heart-icon--hide",c=D(T["heart-icon"],T[r]),l=()=>{s("LIKE_POST",t)};return i(g,{className:o?T["button--liked"]:void 0,onClick:l,children:[n(st,{className:c}),n("span",{children:o?"Liked":"Like"})]})}function It(t){navigator.clipboard.writeText(t)}const Rt=t=>`${location.origin}/posts/${t}`;function Bt({post:t}){const[e,s]=a.useState("Share"),{emitToast:o}=F(),r=B(a.useCallback(()=>s("Share"),[]),1200);return n(g,{onClick:()=>{It(Rt(t.date)),s("Copied"),r.start(),o({title:"Successfully Shared Post",body:`Copied Link to ${t.title} - ${t.date}`,duration:2500})},children:e})}var $t={"post-list__post":"_post-list__post_1lfzb_1"};function G({post:t}){return i("article",{className:$t["post-list__post"],children:[n("img",{src:Nt(t),alt:t.title}),i("figcaption",{children:[n("h3",{children:i(v,{to:`/posts/${t.date}`,children:[t.title," - ",t.date]})}),n("p",{children:t.explanation}),i("div",{children:[n(Et,{postID:t.date}),n(Bt,{post:t})]})]})]})}function Mt(){const{posts:t,loading:e}=V();return n("section",{className:"post-list",children:e?n(X,{}):(t==null?void 0:t.length)?t.map(s=>n(G,{post:s},s.date)):n(k,{text:"No Posts Found"})})}function Ft(){const t=L(),e=a.useCallback(async()=>{t("LOAD_POSTS")},[]);return a.useEffect(()=>{e()},[]),i(A,{children:[i("header",{children:[n("h1",{children:"Spacetagram"}),n("p",{children:"Brought to you by NASA's Astronomy Photo of the Day (APOD) API"})]}),n(Lt,{}),n("main",{children:n(Mt,{})})]})}function jt(){const[t,e]=a.useState(),[s,o]=Y(),{postID:r}=ot(),c=a.useCallback(async()=>{e(await o(_t(r)))},[r]);return a.useEffect(()=>{c()},[]),i(A,{children:[i("header",{children:[n("h1",{children:"Spacetagram"}),n("p",{children:"Brought to you by NASA's Astronomy Photo of the Day (APOD) API"})]}),n(v,{to:"/",children:i(g,{style:{marginBottom:"2rem"},children:[n(R,{}),n("span",{style:{marginLeft:"0.75rem"},children:"View All Posts"})]})}),n("main",{children:n("section",{className:"post-list",children:s?n(X,{}):t?n(G,{post:t},t.date):n(k,{text:"No Posts Found"})})})]})}function Ut(){return i(A,{children:[i("header",{children:[n("h1",{children:"Spacetagram"}),n("p",{children:"Brought to you by NASA's Astronomy Photo of the Day (APOD) API"})]}),n(v,{to:"/",children:i(g,{style:{marginBottom:"2rem"},children:[n(R,{}),n("span",{style:{marginLeft:"0.75rem"},children:"Back To Home"})]})}),n("main",{children:n("section",{className:"post-list",children:n(k,{text:"Page Could Not Be Found"})})})]})}function Ht(){return n("div",{className:"app",children:n(Ct,{children:n(at,{basename:Tt(),children:i(rt,{children:[n(C,{path:"/",element:n(Ft,{})}),n(C,{path:"/posts/:postID",element:n(jt,{})}),n(C,{path:"*",element:n(Ut,{})})]})})})})}ct.render(n(a.StrictMode,{children:n(pt,{children:n(Ht,{})})}),document.getElementById("root"));
