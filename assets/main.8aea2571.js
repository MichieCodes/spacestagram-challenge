var Z=Object.defineProperty,tt=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var w=(t,e,s)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,h=(t,e)=>{for(var s in e||(e={}))O.call(e,s)&&w(t,s,e[s]);if(y)for(var s of y(e))N.call(e,s)&&w(t,s,e[s]);return t},f=(t,e)=>tt(t,et(e));var E=(t,e)=>{var s={};for(var o in t)O.call(t,o)&&e.indexOf(o)<0&&(s[o]=t[o]);if(t!=null&&y)for(var o of y(t))e.indexOf(o)<0&&N.call(t,o)&&(s[o]=t[o]);return s};import{R as a,j as b,n as nt,I as st,a as ot,L as D,u as at,B as R,b as rt,c as ct,d as T,e as it}from"./vendor.2a8141b8.js";const lt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}};lt();function A(...t){return t.filter(e=>e&&e!==!0).join(" ")}const ut=t=>new Date().getTime()-t;function $(t,e,s=!1){const o=a.useRef(-1),r=a.useRef(new Date().getTime()),c=a.useRef(e),[u,l]=a.useState("stopped"),_=a.useCallback((m=e)=>{clearTimeout(o.current),o.current=setTimeout(()=>{p(),t()},m),r.current=new Date().getTime(),c.current=m},[t,e]),S=a.useCallback(()=>{if(c.current<=0){p();return}clearTimeout(o.current),_(c.current),l("running")},[]),P=a.useCallback(()=>{if(c.current-=ut(r.current),c.current<=0){p();return}clearTimeout(o.current),l("paused")},[]),p=a.useCallback(()=>{clearTimeout(o.current),l("stopped")},[]),d=a.useCallback(()=>{_(),l("running")},[_]);return a.useEffect(()=>{if(!!s)return d(),p},[s,d,p]),{start:d,pause:P,resume:S,cancel:p,state:u}}const dt="_toast_1x937_1";var C={toast:dt,"toast--enter":"_toast--enter_1x937_16","toast-scale-in":"_toast-scale-in_1x937_1","toast-slide-in":"_toast-slide-in_1x937_1","toast--exit":"_toast--exit_1x937_19","toast-scale-out":"_toast-scale-out_1x937_1","toast-slide-out":"_toast-slide-out_1x937_1"};const n=b.exports.jsx,i=b.exports.jsxs,v=b.exports.Fragment;function ht({id:t,title:e,body:s,duration:o}){const r=a.useRef(null),[c,u]=a.useState(!0),{deleteToast:l}=F(),_=c?"toast--enter":"toast--exit",S=A(C.toast,C[_]),P=a.useCallback(m=>{m.animationName===C["toast-scale-out"]&&l(t)},[t]),p=a.useCallback(()=>{u(!1)},[]),d=o?$(p,o,!0):null;return a.useEffect(()=>{const m=r.current,W=m.scrollHeight;m.setAttribute("style",`--height: ${W}px`)},[]),i("div",{ref:r,className:S,onAnimationEnd:P,onMouseEnter:()=>d==null?void 0:d.pause(),onMouseLeave:()=>d==null?void 0:d.resume(),onClick:p,children:[n("h4",{children:e}),n("p",{children:s})]})}var pt={"toast-list":"_toast-list_1j3av_1"};function ft(){const t=_t();return n("aside",{className:pt["toast-list"],children:t.map(e=>n(ht,h({},e),e.id))})}const B=a.createContext([]),M=a.createContext({emitToast:()=>0,deleteToast:()=>0});function mt({children:t}){const[e,s]=a.useState([]),o=a.useCallback(c=>{s(u=>[f(h({},c),{id:nt()}),...u])},[]),r=a.useCallback(c=>{s(u=>u.filter(l=>l.id!==c))},[]);return i(M.Provider,{value:{emitToast:o,deleteToast:r},children:[t,n(B.Provider,{value:e,children:!!e.length&&n(ft,{})})]})}function _t(){return a.useContext(B)}function F(){return a.useContext(M)}function j(t){return t.toJSON().split("T")[0]}function U(){return j(new Date)}function H(){let t=new Date;return t=new Date(t.getFullYear(),t.getMonth(),1),j(t)}function K(t){return new Promise(e=>setTimeout(e,t))}const J="https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&thumbs=true";async function I(t=H(),e="desc"){const o=await(await fetch(`${J}&start_date=${t}`)).json();return await K(500),e==="asc"?o:o.reverse()}async function gt(t=U()){const s=await(await fetch(`${J}&date=${t}`)).json();return await K(1e3),s}function yt(){return JSON.parse(localStorage.getItem("spacestagram_likes")||"{}")}function kt(t){localStorage.setItem("spacestagram_likes",JSON.stringify(t))}function Y(){const[t,e]=a.useState(!1),s=a.useCallback(async o=>(e(!0),o.finally(()=>{e(!1)})),[]);return[t,s]}const St={posts:[],likes:{},startDate:""};function Pt(t,e){switch(e.type){case"LOAD_POSTS":{const s=yt();return f(h({},t),{posts:e.payload,likes:s})}case"LOAD_CUSTOM_POSTS":{if(typeof e.payload=="string")break;return f(h({},t),{posts:e.payload})}case"LIKE_POST":{const s=e.payload,o=f(h({},t.likes),{[s]:!t.likes[s]});return kt(o),f(h({},t),{likes:o})}case"SET_START_DATE":return f(h({},t),{startDate:e.payload})}return t}function Tt(){const[t,e]=a.useReducer(Pt,St),[s,o]=Y(),r=a.useCallback(async(c,u)=>{let l={type:c,payload:u};switch(l.type){case"LOAD_POSTS":l.payload=await o(I());break;case"LOAD_CUSTOM_POSTS":if(typeof l.payload!="string")break;e({type:"SET_START_DATE",payload:l.payload}),l.payload=await o(I(l.payload,"asc"));break}e(l)},[]);return[f(h({},t),{loading:s}),r]}const q=a.createContext(null),z=a.createContext(null);function Ct({children:t}){const[e,s]=Tt(),o=a.useCallback(async()=>{s("LOAD_POSTS")},[]);return a.useEffect(()=>{o()},[]),n(q.Provider,{value:s,children:n(z.Provider,{value:e,children:t})})}function L(){return a.useContext(z)}function V(){return a.useContext(q)}const xt="https://michiecodes.github.io/spacestagram-challenge";function X(){return/(\w|-)+$/.exec(xt)[0]}function g(o){var r=o,{children:t,className:e}=r,s=E(r,["children","className"]);return n("button",f(h({className:A("button",e)},s),{children:t}))}var bt={"date-picker":"_date-picker_ya9b3_1"};const Dt="2015-01-01",At=U(),vt=H();function Lt(){const{startDate:t}=L(),e=V(),[s,o]=a.useState(t||vt),r=a.useCallback(()=>{e("LOAD_CUSTOM_POSTS",s)},[s,e]);return i("div",{className:bt["date-picker"],children:[n("label",{htmlFor:"start-date",children:"Start Date: "}),n("input",{type:"date",id:"start-date",className:"input",min:Dt,max:At,value:s,onChange:c=>o(c.target.value)}),n(g,{onClick:r,children:"Browse"})]})}function wt(t,e){const s=a.useRef(),[o,r]=a.useState(0);return a.useEffect(()=>(s.current=setInterval(()=>{r(c=>(c+1)%4)},e),()=>clearInterval(s.current)),[t,e]),t+".".repeat(o)}var Ot={"rocket-loader":"_rocket-loader_l7gac_1","rocket-launch--x":"_rocket-launch--x_l7gac_1","rocket-launch--y":"_rocket-launch--y_l7gac_1"};function k({text:t}){return n("div",{className:Ot["rocket-loader"],children:i("div",{children:[n("span",{children:n(st,{})}),n("p",{children:t})]})})}function G(){const t=wt("Loading",250);return n(k,{text:t})}function Nt(t){return t.media_type==="image"?t.url:t.thumbnail_url}var x={"heart-icon":"_heart-icon_1unyc_1","heart-icon--show":"_heart-icon--show_1unyc_13","show-heart":"_show-heart_1unyc_1","heart-icon--hide":"_heart-icon--hide_1unyc_21","hide-heart":"_hide-heart_1unyc_1","button--liked":"_button--liked_1unyc_29"};function Et({postID:t}){const{likes:e}=L(),s=V(),o=a.useMemo(()=>e[t],[e,t]),r=o?"heart-icon--show":"heart-icon--hide",c=A(x["heart-icon"],x[r]),u=()=>{s("LIKE_POST",t)};return i(g,{className:o?x["button--liked"]:void 0,onClick:u,children:[n(ot,{className:c}),n("span",{children:o?"Liked":"Like"})]})}function It(t){navigator.clipboard.writeText(t)}const Rt=t=>`${location.origin}/${X()}/posts/${t}`;function $t({post:t}){const[e,s]=a.useState("Share"),{emitToast:o}=F(),r=$(a.useCallback(()=>s("Share"),[]),1200);return n(g,{onClick:()=>{It(Rt(t.date)),s("Copied"),r.start(),o({title:"Successfully Shared Post",body:`Copied Link to ${t.title} - ${t.date}`,duration:2500})},children:e})}var Bt={"post-list__post":"_post-list__post_1lfzb_1"};function Q({post:t}){return i("article",{className:Bt["post-list__post"],children:[n("img",{src:Nt(t),alt:t.title}),i("figcaption",{children:[n("h3",{children:i(D,{to:`/posts/${t.date}`,children:[t.title," - ",t.date]})}),n("p",{children:t.explanation}),i("div",{children:[n(Et,{postID:t.date}),n($t,{post:t})]})]})]})}function Mt(){const{posts:t,loading:e}=L();return n("section",{className:"post-list",children:e?n(G,{}):(t==null?void 0:t.length)?t.map(s=>n(Q,{post:s},s.date)):n(k,{text:"No Posts Found"})})}function Ft(){return i(v,{children:[i("header",{children:[n("h1",{children:"Spacetagram"}),n("p",{children:"Brought to you by NASA's Astronomy Photo of the Day (APOD) API"})]}),n(Lt,{}),n("main",{children:n(Mt,{})})]})}function jt(){const[t,e]=a.useState(),[s,o]=Y(),{postID:r}=at(),c=a.useCallback(async()=>{e(await o(gt(r)))},[r]);return a.useEffect(()=>{c()},[]),i(v,{children:[i("header",{children:[n("h1",{children:"Spacetagram"}),n("p",{children:"Brought to you by NASA's Astronomy Photo of the Day (APOD) API"})]}),n(D,{to:"/",children:i(g,{style:{marginBottom:"2rem"},children:[n(R,{}),n("span",{style:{marginLeft:"0.75rem"},children:"View All Posts"})]})}),n("main",{children:n("section",{className:"post-list",children:s?n(G,{}):t?n(Q,{post:t},t.date):n(k,{text:"No Posts Found"})})})]})}function Ut(){return i(v,{children:[i("header",{children:[n("h1",{children:"Spacetagram"}),n("p",{children:"Brought to you by NASA's Astronomy Photo of the Day (APOD) API"})]}),n(D,{to:"/",children:i(g,{style:{marginBottom:"2rem"},children:[n(R,{}),n("span",{style:{marginLeft:"0.75rem"},children:"Back To Home"})]})}),n("main",{children:n("section",{className:"post-list",children:n(k,{text:"Page Could Not Be Found"})})})]})}function Ht(){return n("div",{className:"app",children:n(Ct,{children:n(rt,{basename:X(),children:i(ct,{children:[n(T,{path:"/",element:n(Ft,{})}),n(T,{path:"/posts/:postID",element:n(jt,{})}),n(T,{path:"*",element:n(Ut,{})})]})})})})}it.render(n(a.StrictMode,{children:n(mt,{children:n(Ht,{})})}),document.getElementById("root"));
